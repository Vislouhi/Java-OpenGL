# Метод конечных разностей.

Движения тел описываются вторым законом Ньютона

![Image alt](https://github.com/vislouhi/Blender-Labs/raw/master/images/lesson1/image1.png)

Производная в конечных разностях запишется так

proizvodnajaX= (Xnew-Xold)/dt

Xnew = новая координата. Xold - старая координата.

dt - время одного кадра, т.е 1/FPS.

Тогда вторая производная запишется

proizvodnaja2X=((Xnew-Xold)-(Xold-XveryOld))/(dt*dt)

или

proizvodnaja2X=((Xnew-2\*Xold+XveryOld))/(dt*dt)

Тогда

Xnew =proizvodnaja2X*(dt*dt)+2\*Xold-XveryOld

В свою очередь вторая производная по координате равна Fx/m, тогда

Xnew =Fx/m*(dt*dt)+2\*Xold-XveryOld

Допустим нужно смоделировать движение груза подвешенного на пружину.

Для расчета силы пружины применяется закон Гука:

F=-k\*x, где k коэффициент жесткости пружины.

Так же на груз подвешенный на пружине действует сила тяжести

F=-m\*g

Тогда конечноразностная схема запишется так

Xnew =(-k\*x-m\*g)/m\*(dt*dt)+2\*Xold-XveryOld

Примем за 1 метр растояние в 10 единиц координат в OpenGL

Каков коэффициент жесткости пружины динамометра, если под действием силы 10 Н пружина удлинилась на 10 см?

k=F/m

k= 10/0.1 = 100 Н/м =кг\*с\*с/(м\*м)


Тогда k в координатах OpenGL k= 100 кг\*с\*с/(mOpenGL\*mOpenGL/10/10)= 10000 кг\*с\*с/(mOpenGL)

И g=9.8 м/(с\*с) = 9.8 mOpenGL/10/(с\*с)=0.98 mOpenGL/(с\*с)

Теперь, если в каждом цикле рендера будем производить расчет Xnew и присваивать Xnew координате объекта, то движение объекта будет соответстовать реальному движению.




